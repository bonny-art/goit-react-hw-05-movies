{"version":3,"file":"static/js/134.55da494a.chunk.js","mappings":"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","sources":["pages/Movies.jsx"],"sourcesContent":["import { Button, Loader, Message, MoviesList, SearchForm } from 'components';\nimport {\n  ButtonsContainer,\n  ContainerStyled,\n  SectionStyled,\n} from 'components/App/App.styled';\nimport React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { getMoviesByQuery } from 'service/movies-service';\n\nconst Movies = () => {\n  const [error, setError] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isPreviousButtonVisible, setIsPreviousButtonVisible] = useState(false);\n  const [isNextButtonVisible, setIsNextButtonVisible] = useState(false);\n\n  const [searchQuery, setSearchQuery] = useSearchParams();\n\n  const searchHandler = movie => {\n    setMovies([]);\n    setSearchQuery({ query: movie, page: 1 });\n  };\n\n  useEffect(() => {\n    setError('');\n\n    const query = searchQuery.get('query');\n    const page = Number(searchQuery.get('page'));\n\n    if (query) setIsLoading(true);\n    if (!query) return;\n\n    const getData = async () => {\n      try {\n        const resp = await getMoviesByQuery(query, page);\n        setMovies([...resp.results]);\n\n        setIsPreviousButtonVisible(page > 1);\n        setIsNextButtonVisible(page < resp.total_pages);\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    getData();\n  }, [searchQuery]);\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  const loadPage = step => {\n    const query = searchQuery.get('query');\n    const page = Number(searchQuery.get('page'));\n    setSearchQuery({ query, page: page + step });\n    scrollUp();\n  };\n\n  return (\n    <SectionStyled>\n      <ContainerStyled>\n        {isLoading && <Loader />}\n        <SearchForm searchMovie={searchHandler} />\n        {error && <Message>{error}</Message>}\n        {searchQuery.get('query') && (\n          <>\n            <ButtonsContainer>\n              {isPreviousButtonVisible && (\n                <Button onClick={() => loadPage(-1)}>Previous page</Button>\n              )}\n              <div></div>\n              {isNextButtonVisible && (\n                <Button onClick={() => loadPage(1)}>Next page</Button>\n              )}\n            </ButtonsContainer>\n            {!isLoading && <MoviesList movies={movies} />}\n            <ButtonsContainer>\n              {isPreviousButtonVisible && (\n                <Button onClick={() => loadPage(-1)}>Previous page</Button>\n              )}\n              <div></div>\n              {isNextButtonVisible && (\n                <Button onClick={() => loadPage(1)}>Next page</Button>\n              )}\n            </ButtonsContainer>\n          </>\n        )}\n      </ContainerStyled>\n    </SectionStyled>\n  );\n};\n\nexport default Movies;\n"],"names":["_useState","useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","movies","setMovies","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","isPreviousButtonVisible","setIsPreviousButtonVisible","_useState9","_useState10","isNextButtonVisible","setIsNextButtonVisible","_useSearchParams","useSearchParams","_useSearchParams2","searchQuery","setSearchQuery","useEffect","query","get","page","Number","getData","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","resp","_context","prev","next","getMoviesByQuery","sent","_toConsumableArray","results","total_pages","t0","message","finish","stop","apply","arguments","loadPage","step","window","scroll","top","behavior","_jsx","SectionStyled","children","_jsxs","ContainerStyled","Loader","SearchForm","searchMovie","movie","Message","_Fragment","ButtonsContainer","Button","onClick","MoviesList"],"sourceRoot":""}